<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å´æ—æ´‹çš„ä¸ªäººç½‘ç«™</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Comic Sans MS", "å¹¼åœ†", "å¾®è½¯é›…é»‘", sans-serif;
      /* åœ†æ¶¦å¯çˆ±å­—ä½“ */
    }

    /* å¯†ç éªŒè¯å±‚æ ·å¼ */
    #passwordModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    #passwordInput {
      padding: 12px 20px;
      font-size: 18px;
      border: 2px solid #ddd;
      border-radius: 8px;
      margin-bottom: 20px;
      width: 300px;
      text-align: center;
    }

    #enterBtn {
      padding: 12px 40px;
      font-size: 18px;
      background-color: #4299e1;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #enterBtn:hover {
      background-color: #3182ce;
    }

    #errorMsg {
      color: red;
      margin-top: 10px;
      font-size: 16px;
    }

    /* é¡µé¢ä¸»ä½“æ ·å¼ */
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px 0;
      background: url("https://picsum.photos/id/152/1920/1080") no-repeat center center fixed;
      background-size: cover;
      position: relative;
      overflow-x: hidden;
    }

    /* èƒŒæ™¯é®ç½©åŠ¨æ€æ¸å˜ */
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, rgba(180, 220, 255, 0.3), rgba(220, 180, 255, 0.3));
      background-size: 400% 400%;
      animation: maskGradient 8s ease infinite;
      z-index: -1;
    }

    /* æ ‡é¢˜æ ·å¼ - åŠ¨æ€æ¸å˜+å±…ä¸­ */
    .title {
      font-size: 4rem;
      margin: 30px 0;
      background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #ff6b6b);
      background-size: 400% 400%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: gradientAnimation 10s ease infinite;
      text-align: center;
    }

    /* ç‚¹èµæŒ‰é’®æ ·å¼ */
    .like-btn {
      font-size: 3rem;
      background: none;
      border: none;
      cursor: pointer;
      margin-bottom: 30px;
      transition: all 0.3s ease;
      position: relative;
    }

    .like-btn .heart {
      color: #ccc;
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .like-btn .heart.active {
      color: #ff3366;
      transform: scale(1.2);
      text-shadow: 0 0 10px rgba(255, 51, 102, 0.5);
    }

    /* è‡ªæˆ‘ä»‹ç»å¡ç‰‡æ ·å¼ - åŠ¨æ€æ¸å˜ */
    .intro-card {
      width: 80%;
      max-width: 600px;
      padding: 30px;
      background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
      background-size: 400% 400%;
      animation: gradientAnimation 10s ease infinite;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
      color: white;
      font-size: 1.5rem;
      text-align: center;
    }

    /* 4Ã—4ç…§ç‰‡å±•ç¤ºåŒº */
    .photo-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      width: 80%;
      max-width: 800px;
      margin-bottom: 40px;
    }

    .photo-item {
      width: 100%;
      aspect-ratio: 1/1;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: 2px solid #eee;
    }

    .photo-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* ç•™è¨€æ¿åŒºåŸŸ */
    .message-section {
      width: 80%;
      max-width: 800px;
      margin-bottom: 40px;
    }

    .message-input {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }

    #messageText {
      width: 100%;
      height: 120px;
      padding: 15px;
      font-size: 16px;
      border: 2px solid #ddd;
      border-radius: 8px;
      resize: none;
      background-color: white;
    }

    #saveMsgBtn {
      align-self: flex-end;
      padding: 10px 25px;
      font-size: 16px;
      background-color: #2ecc71;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #saveMsgBtn:hover {
      background-color: #27ae60;
    }

    /* è®¨è®ºåŒºæ ·å¼ */
    .message-board {
      width: 100%;
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      border: 2px solid #ccc;
      padding: 20px;
      min-height: 200px;
    }

    /* ç•™è¨€é¡¹æ ·å¼ï¼ˆæ”¯æŒå·¦æ»‘ï¼‰ */
    .message-item {
      padding: 15px;
      border-bottom: 1px solid #eee;
      margin-bottom: 10px;
      position: relative;
      display: flex;
      align-items: center;
      background-color: white;
      border-radius: 6px;
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    .message-item:last-child {
      border-bottom: none;
    }

    .message-content {
      font-size: 16px;
      color: #333;
      flex: 1;
    }

    .message-time {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
    }

    /* å·¦æ»‘åˆ é™¤æŒ‰é’® */
    .delete-btn {
      position: absolute;
      right: -60px;
      top: 0;
      width: 60px;
      height: 100%;
      background-color: #e74c3c;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: right 0.3s ease;
    }

    .message-item.swipe-active .delete-btn {
      right: 0;
    }

    /* åˆ é™¤å¯†ç éªŒè¯å±‚ */
    #deletePasswordModal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      z-index: 999;
      display: none;
    }

    #deletePasswordInput {
      padding: 10px 15px;
      font-size: 16px;
      border: 2px solid #ddd;
      border-radius: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }

    #deleteConfirmBtn,
    #deleteCancelBtn {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0 5px;
    }

    #deleteConfirmBtn {
      background-color: #e74c3c;
      color: white;
    }

    #deleteCancelBtn {
      background-color: #ddd;
    }

    #deleteErrorMsg {
      color: red;
      margin-top: 10px;
      font-size: 14px;
    }

    /* åŠ¨ç”»å…³é”®å¸§ */
    @keyframes gradientAnimation {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    @keyframes maskGradient {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }
  </style>
</head>

<body>
  <!-- é¡µé¢è®¿é—®å¯†ç éªŒè¯å±‚ -->
  <div id="passwordModal">
    <input type="password" id="passwordInput" placeholder="è¯·è¾“å…¥è®¿é—®å¯†ç ">
    <button id="enterBtn">è¿›å…¥</button>
    <div id="errorMsg"></div>
  </div>

  <!-- ç•™è¨€åˆ é™¤å¯†ç éªŒè¯å±‚ -->
  <div id="deletePasswordModal">
    <input type="password" id="deletePasswordInput" placeholder="è¯·è¾“å…¥åˆ é™¤å¯†ç ">
    <button id="deleteConfirmBtn">ç¡®è®¤åˆ é™¤</button>
    <button id="deleteCancelBtn">å–æ¶ˆ</button>
    <div id="deleteErrorMsg"></div>
  </div>

  <!-- æ ‡é¢˜ -->
  <h1 class="title">Nice To Meet You</h1>

  <!-- ç‚¹èµæŒ‰é’® -->
  <button class="like-btn" id="likeBtn">
    <span class="heart" id="heartIcon">â¤ï¸</span>
  </button>

  <!-- è‡ªæˆ‘ä»‹ç»å¡ç‰‡ -->
  <div class="intro-card">
    å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™ï¼
  </div>

  <!-- 4Ã—4ç…§ç‰‡å±•ç¤ºåŒº -->
  <div class="photo-grid">
    <!-- ç¤ºä¾‹å›¾ç‰‡URLï¼ŒåæœŸå¯æ›¿æ¢ä¸ºäºŒç»´ç  -->
    <div class="photo-item"><img src="https://picsum.photos/id/1068/200/200" alt="äºŒç»´ç 1"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/152/200/200" alt="äºŒç»´ç 2"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/137/200/200" alt="äºŒç»´ç 3"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/164/200/200" alt="äºŒç»´ç 4"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/240/200/200" alt="äºŒç»´ç 5"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/225/200/200" alt="äºŒç»´ç 6"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/188/200/200" alt="äºŒç»´ç 7"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/96/200/200" alt="äºŒç»´ç 8"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/100/200/200" alt="äºŒç»´ç 9"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/110/200/200" alt="äºŒç»´ç 10"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/120/200/200" alt="äºŒç»´ç 11"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/130/200/200" alt="äºŒç»´ç 12"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/140/200/200" alt="äºŒç»´ç 13"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/150/200/200" alt="äºŒç»´ç 14"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/160/200/200" alt="äºŒç»´ç 15"></div>
    <div class="photo-item"><img src="https://picsum.photos/id/170/200/200" alt="äºŒç»´ç 16"></div>
  </div>

  <!-- ç•™è¨€æ¿åŒºåŸŸ -->
  <div class="message-section">
    <div class="message-input">
      <textarea id="messageText" placeholder="è¯·è¾“å…¥ä½ çš„ç•™è¨€..."></textarea>
      <button id="saveMsgBtn">ä¿å­˜</button>
    </div>
    <div class="message-board" id="messageBoard">
      <!-- ç•™è¨€å†…å®¹ä¼šåŠ¨æ€ç”Ÿæˆåœ¨è¿™é‡Œ -->
    </div>
  </div>

  <script>
    // 1. é¡µé¢è®¿é—®å¯†ç éªŒè¯
    const passwordModal = document.getElementById('passwordModal');
    const passwordInput = document.getElementById('passwordInput');
    const enterBtn = document.getElementById('enterBtn');
    const errorMsg = document.getElementById('errorMsg');
    const correctPassword = 'wly2007';

    enterBtn.addEventListener('click', () => {
      if (passwordInput.value === correctPassword) {
        passwordModal.style.display = 'none';
      } else {
        errorMsg.textContent = 'å¯†ç é”™è¯¯ï¼Œè¯·å†æ¬¡è¾“å…¥';
        passwordInput.value = '';
      }
    });

    passwordInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') enterBtn.click();
    });

    // 2. èƒŒæ™¯å›¾æ›´æ¢åŠŸèƒ½ï¼ˆæ— å¯†ç éªŒè¯ï¼ŒåŒå‡»ç›´æ¥åˆ‡æ¢ï¼‰
    const body = document.body;
    const bgList = [
      'https://picsum.photos/id/1068/1920/1080',
      'https://picsum.photos/id/152/1920/1080',
      'https://picsum.photos/id/137/1920/1080',
      'https://picsum.photos/id/164/1920/1080',
      'https://picsum.photos/id/240/1920/1080'
    ];

    // åŒå‡»ç©ºç™½å¤„ç›´æ¥åˆ‡æ¢èƒŒæ™¯
    body.addEventListener('dblclick', (e) => {
      if (!e.target.closest('.intro-card') && !e.target.closest('.like-btn') && !e.target.closest('.photo-grid') && !e.target.closest('.message-section')) {
        const randomBg = bgList[Math.floor(Math.random() * bgList.length)];
        body.style.backgroundImage = `url("${randomBg}")`;
      }
    });

    // 3. ç‚¹èµåŠŸèƒ½ï¼ˆå•æ¬¡åˆ‡æ¢+æœ¬åœ°å­˜å‚¨ï¼‰
    const likeBtn = document.getElementById('likeBtn');
    const heartIcon = document.getElementById('heartIcon');
    let hasLiked = localStorage.getItem('hasLiked') === 'true';
    let likeCount = parseInt(localStorage.getItem('likeCount')) || 0;

    // åˆå§‹åŒ–ç‚¹èµçŠ¶æ€
    if (hasLiked) {
      heartIcon.classList.add('active');
    }

    likeBtn.addEventListener('click', () => {
      hasLiked = !hasLiked;
      if (hasLiked) {
        likeCount++;
        heartIcon.classList.add('active');
      } else {
        likeCount--;
        heartIcon.classList.remove('active');
      }
      localStorage.setItem('hasLiked', hasLiked);
      localStorage.setItem('likeCount', likeCount);
    });

    // 4. ç•™è¨€æ¿åŠŸèƒ½ï¼ˆå«å·¦æ»‘åˆ é™¤+å¯†ç éªŒè¯ï¼‰
    const messageText = document.getElementById('messageText');
    const saveMsgBtn = document.getElementById('saveMsgBtn');
    const messageBoard = document.getElementById('messageBoard');
    const deletePasswordModal = document.getElementById('deletePasswordModal');
    const deletePasswordInput = document.getElementById('deletePasswordInput');
    const deleteConfirmBtn = document.getElementById('deleteConfirmBtn');
    const deleteCancelBtn = document.getElementById('deleteCancelBtn');
    const deleteErrorMsg = document.getElementById('deleteErrorMsg');
    let messages = JSON.parse(localStorage.getItem('messages')) || [];
    let deleteIndex = -1; // è®°å½•è¦åˆ é™¤çš„ç•™è¨€ç´¢å¼•

    // æ¸²æŸ“ç•™è¨€
    function renderMessages() {
      messageBoard.innerHTML = '';
      messages.forEach((msg, index) => {
        const msgItem = document.createElement('div');
        msgItem.className = 'message-item';
        msgItem.dataset.index = index;
        msgItem.innerHTML = `
                    <div class="message-content">
                        ${msg.content}
                        <div class="message-time">${msg.time}</div>
                    </div>
                    <button class="delete-btn">ğŸ—‘ï¸</button>
                `;
        messageBoard.appendChild(msgItem);

        // ä¸ºç•™è¨€é¡¹æ·»åŠ å·¦æ»‘äº‹ä»¶
        let startX = 0;
        msgItem.addEventListener('touchstart', (e) => {
          startX = e.touches[0].clientX;
        });
        msgItem.addEventListener('touchend', (e) => {
          const endX = e.changedTouches[0].clientX;
          if (startX - endX > 50) { // å·¦æ»‘è·ç¦»è¶…è¿‡50pxè§¦å‘
            // å…³é—­å…¶ä»–å·²å±•å¼€çš„åˆ é™¤æŒ‰é’®
            document.querySelectorAll('.message-item').forEach(item => {
              if (item !== msgItem) item.classList.remove('swipe-active');
            });
            msgItem.classList.add('swipe-active');
          } else {
            msgItem.classList.remove('swipe-active');
          }
        });

        // é¼ æ ‡æ¨¡æ‹Ÿå·¦æ»‘ï¼ˆç”µè„‘ç«¯æµ‹è¯•ç”¨ï¼‰
        let mouseStartX = 0;
        msgItem.addEventListener('mousedown', (e) => {
          mouseStartX = e.clientX;
        });
        msgItem.addEventListener('mouseup', (e) => {
          const mouseEndX = e.clientX;
          if (mouseStartX - mouseEndX > 50) {
            document.querySelectorAll('.message-item').forEach(item => {
              if (item !== msgItem) item.classList.remove('swipe-active');
            });
            msgItem.classList.add('swipe-active');
          } else {
            msgItem.classList.remove('swipe-active');
          }
        });

        // åˆ é™¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        msgItem.querySelector('.delete-btn').addEventListener('click', () => {
          deleteIndex = index;
          deletePasswordModal.style.display = 'block';
          deletePasswordInput.value = '';
          deleteErrorMsg.textContent = '';
        });
      });
    }

    // ä¿å­˜ç•™è¨€
    saveMsgBtn.addEventListener('click', () => {
      if (messageText.value.trim() === '') return;
      const now = new Date();
      const timeStr = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
      messages.push({
        content: messageText.value.trim(),
        time: timeStr
      });
      localStorage.setItem('messages', JSON.stringify(messages));
      messageText.value = '';
      renderMessages();
    });

    // å›è½¦ä¿å­˜ç•™è¨€
    messageText.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.key === 'Enter') saveMsgBtn.click();
    });

    // ç¡®è®¤åˆ é™¤ç•™è¨€ï¼ˆå¯†ç éªŒè¯ï¼‰
    deleteConfirmBtn.addEventListener('click', () => {
      if (deletePasswordInput.value === correctPassword) {
        messages.splice(deleteIndex, 1);
        localStorage.setItem('messages', JSON.stringify(messages));
        deletePasswordModal.style.display = 'none';
        renderMessages();
        deleteIndex = -1;
      } else {
        deleteErrorMsg.textContent = 'å¯†ç é”™è¯¯ï¼Œæ— æ³•åˆ é™¤';
        deletePasswordInput.value = '';
      }
    });

    // å–æ¶ˆåˆ é™¤
    deleteCancelBtn.addEventListener('click', () => {
      deletePasswordModal.style.display = 'none';
      deleteIndex = -1;
    });

    // å›è½¦ç¡®è®¤åˆ é™¤
    deletePasswordInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') deleteConfirmBtn.click();
    });

    // åˆå§‹åŒ–æ¸²æŸ“ç•™è¨€
    renderMessages();
  </script>
</body>

</html>